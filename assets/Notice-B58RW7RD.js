import{a as h,c as g,o as N,b as P,d as V,e as l,w as o,f as e,g as u,t as c,ah as I,F as j,E as O,j as A,aj as L}from"./index-B2sUpHKW.js";import{E as z}from"./el-dialog-BUexGnmh.js";import{E as G}from"./el-switch-DmzcyMPI.js";import{a as J,E as K}from"./el-form-item-JDeCQ2vQ.js";import{l as M,s as Q,u as X,r as Y}from"./sys-notice-CYr8urzA.js";import{u as Z}from"./use-table-handlers-BAT35szp.js";const $={class:"main-body"},ee={class:"toolbar"},de={__name:"Notice",setup(te){const d=h({title:""}),i=h({id:"",title:"",content:"",isPublish:!1}),{t,tableRef:E,dialogVisible:p,isEdit:y,formLoading:k,formRef:w,doSearch:C,doAdd:v,doEdit:T,doSubmit:x,doClose:_,doRemove:R}=Z(i),B=[{type:"edit",disabled:s=>!!s.publishTime},{type:"delete"}],W=g(()=>[{type:"selection"},{prop:"id",label:t("thead.ID"),minWidth:50},{prop:"title",label:t("thead.title"),minWidth:120,showOverflowTooltip:!0},{prop:"content",label:t("thead.content"),minWidth:120,showOverflowTooltip:!0},{prop:"publishTime",label:t("thead.publishTime"),minWidth:120},{prop:"createdTime",label:t("thead.createdTime"),minWidth:120},{prop:"createdBy",label:t("thead.createdBy"),minWidth:120}]),D=g(()=>({title:[{required:!0,message:t("form.titleRequired"),trigger:["blur","change"]},{min:2,max:60,message:t("form.titleError"),trigger:["blur","change"]}],content:[{required:!0,message:t("form.contentRequired"),trigger:["blur","change"]},{min:2,max:300,message:t("form.contentError"),trigger:["blur","change"]}]}));function S(){x({save:Q,update:X})}function U(s,a){R(Y,s,a)}return(s,a)=>{const f=O,r=J,m=A,b=K,q=L,F=G,H=z;return N(),P(j,null,[V("div",$,[V("div",ee,[l(b,{inline:!0,model:e(d)},{default:o(()=>[l(r,null,{default:o(()=>[l(f,{modelValue:e(d).title,"onUpdate:modelValue":a[0]||(a[0]=n=>e(d).title=n),placeholder:e(t)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),l(r,null,{default:o(()=>[l(m,{icon:"search",type:"primary",onClick:e(C)},{default:o(()=>[u(c(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(r,null,{default:o(()=>[l(m,{icon:"plus",type:"primary",onClick:e(v)},{default:o(()=>[u(c(e(t)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(q,{ref_key:"tableRef",ref:E,"get-page":e(M),filters:e(d),columns:e(W),operations:B,onHandleEdit:e(T),onHandleDelete:U},null,8,["get-page","filters","columns","onHandleEdit"])]),l(H,{title:e(y)?e(t)("action.edit"):e(t)("action.add"),width:"40%",draggable:"",modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=n=>I(p)?p.value=n:null),"close-on-click-modal":!1,onClose:e(_)},{footer:o(()=>[l(m,{onClick:e(_)},{default:o(()=>[u(c(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",loading:e(k),onClick:S},{default:o(()=>[u(c(e(t)("action.submit")),1)]),_:1},8,["loading"])]),default:o(()=>[l(b,{ref_key:"formRef",ref:w,model:e(i),rules:e(D),"label-width":"80px","label-position":"right"},{default:o(()=>[l(r,{label:e(t)("thead.title"),prop:"title"},{default:o(()=>[l(f,{modelValue:e(i).title,"onUpdate:modelValue":a[1]||(a[1]=n=>e(i).title=n)},null,8,["modelValue"])]),_:1},8,["label"]),l(r,{label:e(t)("thead.content"),prop:"content"},{default:o(()=>[l(f,{type:"textarea",modelValue:e(i).content,"onUpdate:modelValue":a[2]||(a[2]=n=>e(i).content=n),"words-limit":300},null,8,["modelValue"])]),_:1},8,["label"]),l(r,{label:e(t)("form.publish")},{default:o(()=>[l(F,{modelValue:e(i).isPublish,"onUpdate:modelValue":a[3]||(a[3]=n=>e(i).isPublish=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{de as default};
