import{u as x,r as l,x as y}from"./index-B2sUpHKW.js";function S(s){const{t:d}=x(),n=l(),o=l(!1),a=l(!1),i=l(!1),u=l(),f={...s},g=()=>{n.value.reload()},h=()=>{o.value=!0,a.value=!1,u.value&&u.value.clearValidate()},p=e=>{if(s){a.value=!0,o.value=!0;for(const t in s)t in e&&(s[t]=e[t])}},_=(e,t,r)=>{e({id:t}).then(()=>{r&&r()})},E=()=>{const e={...s};return a.value||delete e.id,e},P=(e,t)=>{!s||!e||u.value.validate(r=>{if(r){i.value=!0;let c;const m=e.getParams?e.getParams():E();a.value?c=e.update(m):c=e.save(m),c.then(b=>{t?t(b):y({message:d("tips.success"),type:"success",showClose:!0}),v(),a.value?n.value.refresh():n.value.reload()}).finally(()=>{i.value=!1})}})},R=()=>{if(s)for(const e in f)s[e]=f[e]};function v(){o.value=!1,R()}return{t:d,tableRef:n,dialogVisible:o,isEdit:a,formLoading:i,formRef:u,doSearch:g,doAdd:h,doEdit:p,doSubmit:P,doClose:v,doRemove:_}}export{S as u};
