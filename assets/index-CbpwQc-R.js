import{u as E,r as p,a as V,c as k,b as v,d as f,e as r,w as t,f as e,o as y,t as _,g as B,h as I,i as R,l as H,E as N,j as q}from"./index-B2sUpHKW.js";import{E as z,a as A}from"./el-form-item-JDeCQ2vQ.js";const C={class:"page flex-center"},F={class:"sign-box"},L={class:"title"},Z={__name:"index",setup(S){const g=I(),{t:o}=E(),c=p(),a=V({account:"",password:""}),h=k(()=>({account:[{required:!0,message:o("form.usernameHolder"),trigger:["change","blur"]},{pattern:/^[a-zA-Z][a-zA-Z0-9_-]{3,31}$/,message:o("form.usernameError"),trigger:["change","blur"]}],password:{required:!0,min:4,message:o("form.passwordError"),trigger:["change","blur"]}})),l=p(!1),n=R();function w(){c.value.validate(m=>{m&&(l.value=!0,H(a).then(s=>{n.commit("user/setToken",s.data.token),n.dispatch("user/refreshInfo"),n.commit("setRouteLoaded",!1),g.push("/")}).finally(()=>{l.value=!1}))})}return(m,s)=>{const i=N,u=A,b=q,x=z;return y(),v("div",C,[f("div",F,[r(x,{ref_key:"formRef",ref:c,model:e(a),rules:e(h),"label-width":"86px"},{default:t(()=>[f("h3",L,_(e(o)("login")),1),r(u,{label:e(o)("form.username"),prop:"account"},{default:t(()=>[r(i,{modelValue:e(a).account,"onUpdate:modelValue":s[0]||(s[0]=d=>e(a).account=d),placeholder:e(o)("form.usernameHolder"),"prefix-icon":"user"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:e(o)("form.password"),prop:"password"},{default:t(()=>[r(i,{modelValue:e(a).password,"onUpdate:modelValue":s[1]||(s[1]=d=>e(a).password=d),type:"password",placeholder:e(o)("form.passwordHolder"),"prefix-icon":"lock"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:""},{default:t(()=>[r(b,{type:"primary",loading:e(l),class:"w100p",onClick:w},{default:t(()=>[B(_(e(o)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}};export{Z as default};
