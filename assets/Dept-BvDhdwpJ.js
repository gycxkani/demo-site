import{a as V,r as q,c as E,o as A,b as P,d as k,e as l,w as t,f as e,g as u,t as p,ai as W,ah as L,F as O,E as z,j as G,aj as J}from"./index-B2sUpHKW.js";import{E as M}from"./el-dialog-BUexGnmh.js";import{E as Q}from"./el-radio-B1N3araW.js";import{a as X,E as Y}from"./el-form-item-JDeCQ2vQ.js";import{l as Z,r as $,s as ee,u as ae,a as le}from"./app-dept-BuQQNjJJ.js";import{u as te}from"./use-table-handlers-BAT35szp.js";const oe={class:"main-body"},ne={class:"toolbar"},fe={__name:"Dept",setup(de){const i=V({name:""}),r=V({id:"",name:"",parentId:null}),{t:a,tableRef:C,dialogVisible:c,isEdit:B,formLoading:re,formRef:v,doSearch:D,doAdd:I,doEdit:T,doRemove:w,doSubmit:R,doClose:f}=te(r),_=q([]),U=E(()=>[{prop:"id",label:a("thead.ID")},{prop:"name",label:a("thead.name")},{prop:"createdBy",label:a("thead.createdBy")},{prop:"createdTime",label:a("thead.createdTime"),minWidth:160},{prop:"lastUpdatedBy",label:a("thead.updatedBy")},{prop:"lastUpdatedTime",label:a("thead.updatedTime"),minWidth:160}]),x=E(()=>({name:[{required:!0,message:a("form.usernameHolder"),trigger:["change","blur"]}]}));function h(n){le(n?{id:n.id}:null).then(o=>{_.value=o.data})}function F(){h(),I()}function S(n){h(n),T(n)}function H(n,o){w($,n,o)}function b(){R({save:ee,update:ae})}return(n,o)=>{const g=z,s=X,m=G,y=Y,K=J,N=Q,j=M;return A(),P(O,null,[k("div",oe,[k("div",ne,[l(y,{inline:!0,model:e(i)},{default:t(()=>[l(s,null,{default:t(()=>[l(g,{modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=d=>e(i).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"search",type:"primary",onClick:e(D)},{default:t(()=>[u(p(e(a)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"plus",type:"primary",onClick:F},{default:t(()=>[u(p(e(a)("action.add")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),l(K,{rowKey:"id",ref_key:"tableRef",ref:C,"get-page":e(Z),filters:e(i),columns:e(U),showBatchDelete:!1,showPagination:!1,onHandleEdit:S,onHandleDelete:H},null,8,["get-page","filters","columns"])]),l(j,{title:e(B)?e(a)("action.edit"):e(a)("action.add"),width:"40%",draggable:"",modelValue:e(c),"onUpdate:modelValue":o[3]||(o[3]=d=>L(c)?c.value=d:null),"close-on-click-modal":!1,onClose:e(f)},{footer:t(()=>[l(m,{onClick:e(f)},{default:t(()=>[u(p(e(a)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",onClick:b},{default:t(()=>[u(p(e(a)("action.confirm")),1)]),_:1})]),default:t(()=>[l(y,{model:e(r),rules:e(x),ref_key:"formRef",ref:v,onKeyup:W(b,["enter"]),"label-width":"80px"},{default:t(()=>[l(s,{label:e(a)("thead.name"),prop:"name"},{default:t(()=>[l(g,{modelValue:e(r).name,"onUpdate:modelValue":o[1]||(o[1]=d=>e(r).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(s,{label:e(a)("form.parent"),prop:"parentId"},{default:t(()=>[l(N,{modelValue:e(r).parentId,"onUpdate:modelValue":o[2]||(o[2]=d=>e(r).parentId=d),props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},options:e(_),clearable:"",filterable:"",class:"w100p"},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{fe as default};
