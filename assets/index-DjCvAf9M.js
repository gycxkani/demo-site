import{B as Ne,C as Te,D as Pe,G as K,H as ee,I as ue,J as I,K as te,L as ae,M as W,r as N,m as F,N as se,O as Q,P as we,o as M,b as ne,Q as de,f as E,R as $e,S as be,T as le,U as V,V as Se,W as Ee,c as L,X as ve,Y as xe,e as p,Z as U,$ as Be,a0 as ke,a1 as Oe,a2 as z,a3 as Re,a4 as Z,a5 as ze,a6 as fe,a7 as oe,a8 as Ve,a9 as Ae,aa as Me,ab as re,a as Fe,ac as Le,ad as Ie,ae as De,s as pe,af as Ue,ag as Ke,u as We,n as G,w as ie,ah as He,p as qe,F as Xe}from"./index-B2sUpHKW.js";import Ye from"./MessageItem-8MC5qu8a.js";const je=(e,n,o)=>Te(e.subTree).filter(s=>{var u;return Pe(s)&&((u=s.type)==null?void 0:u.name)===n&&!!s.component}).map(s=>s.component.uid).map(s=>o[s]).filter(s=>!!s),Ge=(e,n)=>{const o={},d=Ne([]);return{children:d,addChild:u=>{o[u.uid]=u,d.value=je(e,n,o)},removeChild:u=>{delete o[u],d.value=d.value.filter(b=>b.uid!==u)}}},H=Symbol("tabsRootContextKey"),Je=K({tabs:{type:ee(Array),default:()=>ue([])}}),me="ElTabBar",Qe=I({name:me}),Ze=I({...Qe,props:Je,setup(e,{expose:n}){const o=e,d=le(),t=te(H);t||ae(me,"<el-tabs><el-tab-bar /></el-tabs>");const s=W("tabs"),u=N(),b=N(),c=()=>{let r=0,y=0;const h=["top","bottom"].includes(t.props.tabPosition)?"width":"height",O=h==="width"?"x":"y",l=O==="x"?"left":"top";return o.tabs.every($=>{var S,x;const T=(x=(S=d.parent)==null?void 0:S.refs)==null?void 0:x[`tab-${$.uid}`];if(!T)return!1;if(!$.active)return!0;r=T[`offset${V(l)}`],y=T[`client${V(h)}`];const B=window.getComputedStyle(T);return h==="width"&&(y-=Number.parseFloat(B.paddingLeft)+Number.parseFloat(B.paddingRight),r+=Number.parseFloat(B.paddingLeft)),!1}),{[h]:`${y}px`,transform:`translate${V(O)}(${r}px)`}},g=()=>b.value=c(),C=[],v=()=>{var r;C.forEach(h=>h.stop()),C.length=0;const y=(r=d.parent)==null?void 0:r.refs;if(y){for(const h in y)if(h.startsWith("tab-")){const O=y[h];O&&C.push(Q(O,g))}}};F(()=>o.tabs,async()=>{await se(),g(),v()},{immediate:!0});const m=Q(u,()=>g());return we(()=>{C.forEach(r=>r.stop()),C.length=0,m.stop()}),n({ref:u,update:g}),(r,y)=>(M(),ne("div",{ref_key:"barRef",ref:u,class:de([E(s).e("active-bar"),E(s).is(E(t).props.tabPosition)]),style:$e(b.value)},null,6))}});var et=be(Ze,[["__file","tab-bar.vue"]]);const tt=K({panes:{type:ee(Array),default:()=>ue([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),at={tabClick:(e,n,o)=>o instanceof Event,tabRemove:(e,n)=>n instanceof Event},ce="ElTabNav",st=I({name:ce,props:tt,emits:at,setup(e,{expose:n,emit:o}){const d=te(H);d||ae(ce,"<el-tabs><tab-nav /></el-tabs>");const t=W("tabs"),s=Se(),u=Ee(),b=N(),c=N(),g=N(),C=N(),v=N(!1),m=N(0),r=N(!1),y=N(!0),h=L(()=>["top","bottom"].includes(d.props.tabPosition)?"width":"height"),O=L(()=>({transform:`translate${h.value==="width"?"X":"Y"}(-${m.value}px)`})),l=()=>{if(!b.value)return;const i=b.value[`offset${V(h.value)}`],f=m.value;if(!f)return;const a=f>i?f-i:0;m.value=a},$=()=>{if(!b.value||!c.value)return;const i=c.value[`offset${V(h.value)}`],f=b.value[`offset${V(h.value)}`],a=m.value;if(i-a<=f)return;const P=i-a>f*2?a+f:i-f;m.value=P},S=async()=>{const i=c.value;if(!v.value||!g.value||!b.value||!i)return;await se();const f=g.value.querySelector(".is-active");if(!f)return;const a=b.value,P=["top","bottom"].includes(d.props.tabPosition),_=f.getBoundingClientRect(),w=a.getBoundingClientRect(),D=P?i.offsetWidth-w.width:i.offsetHeight-w.height,R=m.value;let k=R;P?(_.left<w.left&&(k=R-(w.left-_.left)),_.right>w.right&&(k=R+_.right-w.right)):(_.top<w.top&&(k=R-(w.top-_.top)),_.bottom>w.bottom&&(k=R+(_.bottom-w.bottom))),k=Math.max(k,0),m.value=Math.min(k,D)},x=()=>{var i;if(!c.value||!b.value)return;e.stretch&&((i=C.value)==null||i.update());const f=c.value[`offset${V(h.value)}`],a=b.value[`offset${V(h.value)}`],P=m.value;a<f?(v.value=v.value||{},v.value.prev=P,v.value.next=P+a<f,f-P<a&&(m.value=f-a)):(v.value=!1,P>0&&(m.value=0))},T=i=>{let f=0;switch(i.code){case z.left:case z.up:f=-1;break;case z.right:case z.down:f=1;break;default:return}const a=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let _=a.indexOf(i.target)+f;_<0?_=a.length-1:_>=a.length&&(_=0),a[_].focus({preventScroll:!0}),a[_].click(),B()},B=()=>{y.value&&(r.value=!0)},q=()=>r.value=!1;return F(s,i=>{i==="hidden"?y.value=!1:i==="visible"&&setTimeout(()=>y.value=!0,50)}),F(u,i=>{i?setTimeout(()=>y.value=!0,50):y.value=!1}),Q(g,x),ve(()=>setTimeout(()=>S(),0)),xe(()=>x()),n({scrollToActiveTab:S,removeFocus:q}),()=>{const i=v.value?[p("span",{class:[t.e("nav-prev"),t.is("disabled",!v.value.prev)],onClick:l},[p(U,null,{default:()=>[p(Be,null,null)]})]),p("span",{class:[t.e("nav-next"),t.is("disabled",!v.value.next)],onClick:$},[p(U,null,{default:()=>[p(ke,null,null)]})])]:null,f=e.panes.map((a,P)=>{var _,w,D,R;const k=a.uid,X=a.props.disabled,Y=(w=(_=a.props.name)!=null?_:a.index)!=null?w:`${P}`,j=!X&&(a.isClosable||e.editable);a.index=`${P}`;const ye=j?p(U,{class:"is-icon-close",onClick:A=>o("tabRemove",a,A)},{default:()=>[p(Oe,null,null)]}):null,ge=((R=(D=a.slots).label)==null?void 0:R.call(D))||a.props.label,Ce=!X&&a.active?0:-1;return p("div",{ref:`tab-${k}`,class:[t.e("item"),t.is(d.props.tabPosition),t.is("active",a.active),t.is("disabled",X),t.is("closable",j),t.is("focus",r.value)],id:`tab-${Y}`,key:`tab-${k}`,"aria-controls":`pane-${Y}`,role:"tab","aria-selected":a.active,tabindex:Ce,onFocus:()=>B(),onBlur:()=>q(),onClick:A=>{q(),o("tabClick",a,Y,A)},onKeydown:A=>{j&&(A.code===z.delete||A.code===z.backspace)&&o("tabRemove",a,A)}},[ge,ye])});return p("div",{ref:g,class:[t.e("nav-wrap"),t.is("scrollable",!!v.value),t.is(d.props.tabPosition)]},[i,p("div",{class:t.e("nav-scroll"),ref:b},[p("div",{class:[t.e("nav"),t.is(d.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(d.props.tabPosition))],ref:c,style:O.value,role:"tablist",onKeydown:T},[e.type?null:p(et,{ref:C,tabs:[...e.panes]},null),f])])])}}}),nt=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ee(Function),default:()=>!0},stretch:Boolean}),J=e=>Ve(e)||Ae(e),lt={[fe]:e=>J(e),tabClick:(e,n)=>n instanceof Event,tabChange:e=>J(e),edit:(e,n)=>["remove","add"].includes(n),tabRemove:e=>J(e),tabAdd:()=>!0},ot=I({name:"ElTabs",props:nt,emits:lt,setup(e,{emit:n,slots:o,expose:d}){var t;const s=W("tabs"),u=L(()=>["left","right"].includes(e.tabPosition)),{children:b,addChild:c,removeChild:g}=Ge(le(),"ElTabPane"),C=N(),v=N((t=e.modelValue)!=null?t:"0"),m=async(l,$=!1)=>{var S,x,T;if(!(v.value===l||oe(l)))try{await((S=e.beforeLeave)==null?void 0:S.call(e,l,v.value))!==!1&&(v.value=l,$&&(n(fe,l),n("tabChange",l)),(T=(x=C.value)==null?void 0:x.removeFocus)==null||T.call(x))}catch{}},r=(l,$,S)=>{l.props.disabled||(m($,!0),n("tabClick",l,S))},y=(l,$)=>{l.props.disabled||oe(l.props.name)||($.stopPropagation(),n("edit",l.props.name,"remove"),n("tabRemove",l.props.name))},h=()=>{n("edit",void 0,"add"),n("tabAdd")};F(()=>e.modelValue,l=>m(l)),F(v,async()=>{var l;await se(),(l=C.value)==null||l.scrollToActiveTab()}),Re(H,{props:e,currentName:v,registerPane:l=>{b.value.push(l)},sortPane:c,unregisterPane:g}),d({currentName:v});const O=({render:l})=>l();return()=>{const l=o["add-icon"],$=e.editable||e.addable?p("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:h,onKeydown:T=>{[z.enter,z.numpadEnter].includes(T.code)&&h()}},[l?Z(o,"add-icon"):p(U,{class:s.is("icon-plus")},{default:()=>[p(ze,null,null)]})]):null,S=p("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[p(O,{render:()=>{const T=b.value.some(B=>B.slots.label);return p(st,{ref:C,currentName:v.value,editable:e.editable,type:e.type,panes:b.value,stretch:e.stretch,onTabClick:r,onTabRemove:y},{$stable:!T})}},null),$]),x=p("div",{class:s.e("content")},[Z(o,"default")]);return p("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[x,S])}}});var rt=ot;const it=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),he="ElTabPane",ct=I({name:he}),ut=I({...ct,props:it,setup(e){const n=e,o=le(),d=Me(),t=te(H);t||ae(he,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=W("tab-pane"),u=N(),b=L(()=>n.closable||t.props.closable),c=re(()=>{var r;return t.currentName.value===((r=n.name)!=null?r:u.value)}),g=N(c.value),C=L(()=>{var r;return(r=n.name)!=null?r:u.value}),v=re(()=>!n.lazy||g.value||c.value);F(c,r=>{r&&(g.value=!0)});const m=Fe({uid:o.uid,slots:d,props:n,paneName:C,active:c,index:u,isClosable:b});return t.registerPane(m),ve(()=>{t.sortPane(m)}),Le(()=>{t.unregisterPane(m.uid)}),(r,y)=>E(v)?Ie((M(),ne("div",{key:0,id:`pane-${E(C)}`,class:de(E(s).b()),role:"tabpanel","aria-hidden":!E(c),"aria-labelledby":`tab-${E(C)}`},[Z(r.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[De,E(c)]]):pe("v-if",!0)}});var _e=be(ut,[["__file","tab-pane.vue"]]);const dt=Ue(rt,{TabPane:_e}),bt=Ke(_e),pt={__name:"index",setup(e){const{t:n}=We(),o=N("system"),d=L(()=>[{name:"system",label:n("personal.Messages")},{name:"private",label:n("personal.SiteMail")}]);return(t,s)=>{const u=bt,b=dt;return M(),G(b,{modelValue:E(o),"onUpdate:modelValue":s[0]||(s[0]=c=>He(o)?o.value=c:null),class:"tabs"},{default:ie(()=>[(M(!0),ne(Xe,null,qe(E(d),(c,g)=>(M(),G(u,{key:g,label:c.label,name:c.name},{default:ie(()=>[E(o)===c.name?(M(),G(Ye,{key:0,type:c.name},null,8,["type"])):pe("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}};export{pt as default};
