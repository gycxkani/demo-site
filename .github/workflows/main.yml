# å·¥ä½œæµåç§°
name: Build and Deploy
# å·¥ä½œæµè§¦å‘æ¡ä»¶ï¼Œè¿™é‡Œæ˜¯git pushå‘½ä»¤å‘ç”Ÿæ—¶
on: [push]
# permissions:
#   contents: write
# å·¥ä½œæµè¿è¡Œçš„ä½œä¸šé…ç½®
jobs:
# ä½œä¸šåç§°
  build-and-deploy:
    # concurrency: ci-${{ github.ref }} # å¦‚æœæ‚¨æ‰“ç®—å¿«é€Ÿè¿ç»­è¿›è¡Œå¤šä¸ªéƒ¨ç½²ï¼Œå»ºè®®ä½¿ç”¨.
    # è¿è¡Œåœ¨æœ€æ–°çš„ubuntuç³»ç»Ÿä¸­
    runs-on: ubuntu-latest
    # ä½œä¸šæ­¥éª¤
    steps:
      # æ­¥éª¤1ï¼šcheckoutä»£ç 
      - name: Checkout ğŸ›ï¸ 
        # ä½¿ç”¨checkouæ’ä»¶
        uses: actions/checkout@v4
      # æ­¥éª¤2ï¼šå®‰è£…å’Œæ‰“åŒ…
      # - name: Install and Build ğŸ”§ # è¿™ä¸ªç¤ºä¾‹é¡¹ç›®ä½¿ç”¨npmæ„å»ºï¼Œå¹¶å°†ç»“æœè¾“å‡ºåˆ°â€œæ„å»ºâ€æ–‡ä»¶å¤¹ä¸­ã€‚æ›¿æ¢ä¸ºæ„å»ºé¡¹ç›®æ‰€éœ€çš„å‘½ä»¤ï¼Œå¦‚æœç«™ç‚¹æ˜¯é¢„å…ˆæ„å»ºçš„ï¼Œåˆ™å®Œå…¨åˆ é™¤æ­¤æ­¥éª¤ã€‚
      #   # è¿è¡Œçš„å‘½ä»¤ï¼Œè¿™é‡ŒåŒ…å«ä¸¤æ¡ï¼šnpm i å’Œ npm run build
      #   run: |
      #     npm i
      #     npm run build
      # æ­¥éª¤3ï¼šéƒ¨ç½²é™æ€èµ„æº
      - name: Deploy ğŸš€ 
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          # éƒ¨ç½²åˆ°çš„åˆ†æ”¯ï¼Œè¿™é‡Œæ˜¯GitHub Pagesé»˜è®¤åˆ†æ”¯gh-pages
          branch: gh-pages
          # è¦å‘å¸ƒçš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œé…ç½®ä¸ºæ‰“åŒ…çš„ç›®æ ‡æ–‡ä»¶å¤¹dist
          folder: dist
          # é…ç½®ä¸ªäººä»¤ç‰Œï¼Œè®¾ç½®ä¸ºæœ¬ä»“åº“æ·»åŠ åˆ°Secretsçš„DEPLOY_KEY
          token: ${{ secrets.DEPLOY_KEY}}
